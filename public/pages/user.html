<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    /> -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css" />
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
      integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <title>Control de gastos</title>
    <meta name="apple-mobile-web-app-status-bar" content="#378dfc" />
    <meta name="theme-color" content="#378dfc" />
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="box-shadow: 0 0 5px black">
        <div class="container">
          <a class="navbar-brand" id="index" href="../index.html">Control de gastos</a>
          <a
            href="#"
            class="m-0 text-light lead text-decoration-none"
            id="user"
          ></a>
        </div>
      </nav>
    </header>
    <div id="loadingSpinner">
      <div class="spinner"></div>
      <p class="lead mt-5 loadingText">No es buena idea entrar acá</p>
    </div>
    <div id="loadingScreen"></div>
    <main class="container my-5">
      <h1 class="display-1 text-center">Cuenta</h1>
      <hr class="mt-0 mb-4" />
      <div class="row">
        <div class="col-4">
          <img
            src="https://developers.google.com/web/images/contributors/no-photo.jpg?hl=es-419"
            alt="usuario"
            class="w-100"
            style="border-radius: 50%; box-shadow: 0 0 5px rgba(0, 0, 0, 0.192);"
          />
        </div>
        <div class="col-8">
          <h2 class="display-4 mb-0" id="name">Nombre</h2>
          <hr class="my-1" />
          <p class="lead my-0" style="font-size: 17px">
            Debes: <span id="debes" class="fw-bold"></span>
          </p>
          <p class="lead my-0" style="font-size: 17px">
            Te deben: <span id="aFavor" class="fw-bold"></span>
          </p>
        </div>
      </div>
      <section class="mt-3">
        <div class="card bg-light my-2">
          <div class="card-body">
            <h5 class="card-title mb-0">Estado</h5>
            <p class="textoImporte mb-2">
              Limite: <span id="limiteEstado"></span>
            </p>
            <div class="card-text">
              <div class="d-flex justify-content-between">
                <p class="mb-0">$0</p>
                <p id="limiteEstadoBar" class="mb-0"></p>
              </div>
              <div class="progress">
                <div
                  id="progressBar"
                  class="progress-bar bg-success progress-bar-striped progress-bar-animated"
                  role="progressbar"
                  aria-valuenow="0"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              </div>
              <p class="mt-2 mb-0">
                Restante: <span id="saldoRestante" class="fw-bold"></span>
              </p>
            </div>
          </div>
        </div>
      </section>
      <section class="mb-1">
        <div class="card bg-light my-2">
          <div class="card-body">
            <h5 class="card-title mb-2">Gastos totales</h5>
            <div class="card-text">
              <p class="my-0">
                Efectivo: <span id="efectivoPropio" class="fw-bold"></span> /
                <span id="efectivoPapas" class="fw-bold"></span>
              </p>
              <p class="textoImporte mb-1">Plata propia / Plata papas</p>
              <p class="my-0">TD: <span id="TD" class="fw-bold"></span></p>
              <p class="my-0">TC: <span id="TC" class="fw-bold"></span></p>
              <hr class="my-2" />
              <div class="text-end">
                <p class="my-0">
                  Total: <span id="totalGastos" class="fw-bold"></span>
                </p>
                <p class="textoImporte my-0">
                  Propio: <span id="totalPropio"></span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="mb-1">
        <div class="card bg-light my-2">
          <div class="card-body">
            <h5 class="card-title mb-0">Estadisticas</h5>
            <p class="textoImporte mb-2">
              Periodo: <span id="fechaInicial"></span>
            </p>
            <div class="card-text mb-0">
              <p class="mt-2 mb-0">
                Total: <span id="totalGastos2" class="fw-bold"></span>
              </p>
              <p class="textoImporte my-0">
                Dias transcurridos: <span id="dias"></span>
              </p>
              <div class="d-flex justify-content-between">
                <p class="textoImporte my-0">
                  Promedio por dia: <span id="promedio"></span>
                </p>
                <p class="textoImporte my-0" id="promedioComparacion">
                </p>
              </div>
              <div class="d-flex justify-content-between">
                <p class="textoImporte my-0">
                  Promedio propio por dia: <span id="promedioPropio"></span>
                </p>
                <p class="textoImporte my-0" id="promedioComparacionPropio"></p>
              </div>
              <p class="textoImporte my-0">
                Porcentajes (Propio/Papas): <span id="porcentajes"></span>
              </p>
              <p class="textoImporte mt-1 mb-2" id="aclaracionPeriodo" style="display: none;">
                *Respecto del periodo anterior
              </p>
              <hr class="my-2" />
              <p class="mb-0" id="diasRestantesCont">
                <span id="diasRestantes"></span> hasta el proximo periodo
              </p>
            </div>
          </div>
        </div>
      </section>
      <section class="accordion mb-3" id="acordeonGraficos">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button
              class="accordion-button collapsed bg-light"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseOne"
              aria-expanded="false"
              aria-controls="collapseOne"
            >
              Graficos
            </button>
          </h2>
          <div
            id="collapseOne"
            class="accordion-collapse collapse"
            aria-labelledby="headingOne"
            data-bs-parent="acordeonGraficos"
          >
            <div class="accordion-body bg-light">
              <div class="position-relative w-100">
                <div class="text-center">
                  <h3 class="display-6">Grafico categorias</h3>
                </div> 
                <div
                  style="
                    width: 100%;
                    height: 40px;
                    position: absolute;
                    top: 250px;
                    left: 0;
                    line-height: 19px;
                    text-align: center;
                    z-index: 999999999;
                  "
                >
                  <span id="totalGrafico"></span>
                </div>
                <canvas id="graficoDonut" class="mb-4" width="400" height="400"></canvas>
                <hr>
                <div class="text-center">
                  <h3 class="display-6">Grafico gastos</h3>
                </div> 
                <canvas id="graficoGastos" class="mt-2" width="400" height="400"></canvas>
                <hr>
                <div class="text-center">
                  <h3 class="display-6">Grafico fondos</h3>
                </div> 
                <canvas id="graficoFondos" class="mt-2" width="400" height="400"></canvas>
              </div>
            </div>
          </div>
        </div>
      </section>
      <button
        type="button"
        class="btn btn-outline-success w-100 py-3"
        data-bs-toggle="modal"
        data-bs-target="#modalAgregarFondos"
        id="btnAgregarFondos"
      >
        Añadir fondos
      </button>
      <button
        type="button"
        class="btn btn-outline-warning w-100 py-3 my-3"
        data-bs-toggle="modal"
        data-bs-target="#modalAgregarFondos"
        id="btnTransferir"
      >
        Transferir fondos
      </button>
      <button
        type="button"
        class="btn btn-outline-info w-100 py-3 mb-3"
        id="btnModificarLimite"
        data-bs-toggle="modal"
        data-bs-target="#modalLimite"
      >
        Modificar limite
      </button>
      <a
        class="btn btn-personalizado text-light w-100 py-3 mb-3"
        href="/pages/periodos.html"
      >
        Periodos anteriores
      </a>
      <button
        type="button"
        class="btn btn-outline-danger w-100 py-3 mb-3"
        data-bs-toggle="modal"
        data-bs-target="#modalReset"
      >
        Iniciar nuevo periodo
      </button>
      <!-- <button
        type="button"
        class="btn btn-outline-info w-100 py-3 mb-3"
        id="btnTransferirDatos"
      >
        Transferir datos
      </button> -->
    </main>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script src="../js/pagUser.js" type="module"></script>
    <div
      class="modal fade"
      id="modalAgregarFondos"
      tabindex="-1"
      aria-labelledby="tituloModal"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tituloModal">Añadir fondos</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form action="" id="formularioFondeo">
              <div>
                <label for="importe">Importe</label>
                <input
                  type="number"
                  class="form-control"
                  id="importe"
                  placeholder="Importe"
                />
                <div class="invalid-feedback" id="invalidSaldo">
                  Cargue un valor valido
                </div>
              </div>
              <div class="form-group my-2">
                <label for="cuenta" id="lblCuenta">Cuenta</label>
                <select class="form-select" id="cuenta">
                  <option value="0">Seleccione</option>
                  <option value="Efectivo">Efectivo</option>
                  <option value="TD">TD</option>
                </select>
                <div class="invalid-feedback">Seleccione una opcion</div>
              </div>
              <div class="form-group my-2">
                <label for="comentario">Comentario</label>
                <textarea
                  class="form-control"
                  id="comentario"
                  rows="2"
                  placeholder="Devolucion de prestamo"
                ></textarea>
              </div>
              <div class="text-end">
                <button
                  type="submit"
                  class="btn btn-outline-success mt-2"
                  id="btnAñadir"
                >
                  Añadir
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div
      class="modal fade"
      id="modalReset"
      tabindex="-1"
      aria-labelledby="tituloModal2"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tituloModal2">Nuevo Periodo</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p class="lead my-0">¿Esta seguro?</p>
            <p class="textoImporte mb-2">Esta accion no se puede deshacer</p>
            <div class="text-end">
              <button
                data-bs-dismiss="modal"
                aria-label="Close"
                class="btn btn-outline-secondary mt-2"
              >
                Cancelar
              </button>
              <button type="submit" class="btn btn-outline-danger mt-2" id="reset">
                Iniciar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      class="modal fade"
      id="modalLimite"
      tabindex="-1"
      aria-labelledby="tituloModal3"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tituloModal3">Modificar limite</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form action="" id="formularioLimite">
              <div>
                <label for="importe" class="mb-1">Nuevo limite</label>
                <input
                  type="number"
                  class="form-control"
                  id="limite"
                  placeholder="Limite"
                />
                <p class="textoImporte mt-1">
                  Actual: <span id="limiteActual"></span>
                </p>
                <div class="invalid-feedback" id="invalidLimite">
                  Cargue un valor valido
                </div>
              </div>
              <div class="text-end">
                <button
                  type="submit"
                  class="btn btn-outline-info mt-2"
                  id="btnModificar"
                >
                  Modificar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
